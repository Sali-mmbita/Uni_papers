<!-- app/templates/papers.html -->
{% extends "base.html" %}
{% block content %}
<div class="container mt-4">
    <h2 class="mb-3"> Browse Past Papers</h2>

    <!-- ðŸ”Ž Search & Filter Form -->
    <form method="get" action="{{ url_for('main.papers') }}" class="row g-2 mb-4">
        <div class="col-md-4">
            <input type="text" name="q" class="form-control" placeholder="Search by title..." value="{{ request.args.get('q', '') }}">
        </div>
        <div class="col-md-3">
            <input type="text" name="subject" class="form-control" placeholder="Filter by subject..." value="{{ request.args.get('subject', '') }}">
        </div>
        <div class="col-md-2">
            <input type="text" name="year" class="form-control" placeholder="Year..." value="{{ request.args.get('year', '') }}">
        </div>
        <div class="col-md-2">
            <button type="submit" class="btn btn-primary w-100">Search</button>
        </div>
    </form>

    <!-- ðŸ“‹ Results Table -->
    {% if papers %}
        <table class="table table-bordered">
            <thead>
                <tr>
                    <th>Title</th>
                    <th>Subject</th>
                    <th>Year</th>
                    <th>Uploaded By</th>
                    <th>Download</th>
                </tr>
            </thead>
            <tbody>
                {% for paper in papers %}
                <tr>
                    <td>{{ paper.title }}</td>
                    <td>{{ paper.subject }}</td>
                    <td>{{ paper.year or "N/A" }}</td>
                    <td>{{ paper.uploader.username }}</td>
                    <td>
                      <a href="{{ url_for('main.view_paper', paper_id=paper.id) }}" class="btn btn-info btn-sm">
                        View
                      </a>

                </tr>
                {% endfor %}
            </tbody>
        </table>
    {% else %}
        <p class="text-muted">No papers found. Try searching with different keywords.</p>
    {% endif %}
</div>
{% endblock %}
