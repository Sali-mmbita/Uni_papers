<!-- templates/view_paper.html -->
{% extends "base.html" %}
{% block title %}{{ paper.title }}{% endblock %}

{% block content %}
<!--
  Detailed view for a single paper.
  Expects `paper` object with attributes: title, subject, year, uploaded_at, author, file_path, id.
-->
<div class="row">
  <div class="col-lg-8">
    <div class="card">
      <div class="card-body">
        <h4>{{ paper.title }}</h4>
        <p class="small-muted mb-1">{{ paper.subject }} Â· {{ paper.year or 'N/A' }}</p>
        <p class="small-muted">Uploaded by {{ paper.author.username }} on {{ paper.uploaded_at.strftime('%Y-%m-%d %H:%M') }}</p>

        <!-- Inline PDF preview -->
        {% if paper.file_path.lower().endswith('.pdf') %}
          <div class="mt-3">
            <iframe src="{{ url_for('main.preview', paper_id=paper.id) }}" width="100%" height="600" style="border:1px solid #dee2e6; border-radius:6px;"></iframe>
          </div>
        {% else %}
          <div class="alert alert-info mt-3">
            Inline preview is available for PDF files. Use Download to open other file types.
          </div>
        {% endif %}
      </div>

      <div class="card-footer text-end">
        <a class="btn btn-success" href="{{ url_for('main.download', paper_id=paper.id) }}"><i class="bi bi-download"></i> Download</a>
        <a class="btn btn-secondary" href="{{ url_for('main.papers') }}">Back to list</a>
      </div>
    </div>
  </div>

  <!-- Right column: quick metadata or actions -->
  <div class="col-lg-4">
    <div class="card shadow-sm">
      <div class="card-body">
        <h6 class="mb-3">Paper Info</h6>
        <p class="mb-1"><strong>Title:</strong> {{ paper.title }}</p>
        <p class="mb-1"><strong>Subject:</strong> {{ paper.subject }}</p>
        <p class="mb-1"><strong>Year:</strong> {{ paper.year or 'N/A' }}</p>
        <p class="mb-1"><strong>Uploaded:</strong> {{ paper.uploaded_at.strftime('%Y-%m-%d') }}</p>
        <p class="mb-1"><strong>Uploader:</strong> {{ paper.author.username }}</p>
      </div>
    </div>
  </div>
</div>
{% endblock %}
